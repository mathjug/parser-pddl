import pytest
import pddl
from src.parser_pddl import Parser

@pytest.mark.parametrize("filenames,expected", [
    (["./tests/examples/gripper3.pddl","./tests/examples/gripper3_2_balls.pddl"],
    ['at-ball_ball1_rooma', 'at-ball_ball1_roomb', 'at-ball_ball2_rooma', 'at-ball_ball2_roomb', 'at-robby_rooma', 'at-robby_roomb', 'carry_ball1_left', 'carry_ball1_right', 'carry_ball2_left', 'carry_ball2_right', 'free_left', 'free_right', 'whole_ball1', 'whole_ball2']),
    (['./tests/examples/gripper3.pddl', './tests/examples/gripper3_3_balls.pddl'], ['at-ball_ball1_rooma', 'at-ball_ball1_roomb', 'at-ball_ball2_rooma', 'at-ball_ball2_roomb', 'at-ball_ball3_rooma', 'at-ball_ball3_roomb', 'at-robby_rooma', 'at-robby_roomb', 'carry_ball1_left', 'carry_ball1_right', 'carry_ball2_left', 'carry_ball2_right', 'carry_ball3_left', 'carry_ball3_right', 'free_left', 'free_right', 'whole_ball1', 'whole_ball2', 'whole_ball3']),
    (['./tests/examples/triangle-tire.pddl', './tests/examples/triangle-tire-1.pddl'], ['not-flattire', 'road_l-1-1_l-1-2', 'road_l-1-1_l-1-3', 'road_l-1-1_l-2-1', 'road_l-1-1_l-2-2', 'road_l-1-1_l-2-3', 'road_l-1-1_l-3-1', 'road_l-1-1_l-3-2', 'road_l-1-1_l-3-3', 'road_l-1-2_l-1-1', 'road_l-1-2_l-1-3', 'road_l-1-2_l-2-1', 'road_l-1-2_l-2-2', 'road_l-1-2_l-2-3', 'road_l-1-2_l-3-1', 'road_l-1-2_l-3-2', 'road_l-1-2_l-3-3', 'road_l-1-3_l-1-1', 'road_l-1-3_l-1-2', 'road_l-1-3_l-2-1', 'road_l-1-3_l-2-2', 'road_l-1-3_l-2-3', 'road_l-1-3_l-3-1', 'road_l-1-3_l-3-2', 'road_l-1-3_l-3-3', 'road_l-2-1_l-1-1', 'road_l-2-1_l-1-2', 'road_l-2-1_l-1-3', 'road_l-2-1_l-2-2', 'road_l-2-1_l-2-3', 'road_l-2-1_l-3-1', 'road_l-2-1_l-3-2', 'road_l-2-1_l-3-3', 'road_l-2-2_l-1-1', 'road_l-2-2_l-1-2', 'road_l-2-2_l-1-3', 'road_l-2-2_l-2-1', 'road_l-2-2_l-2-3', 'road_l-2-2_l-3-1', 'road_l-2-2_l-3-2', 'road_l-2-2_l-3-3', 'road_l-2-3_l-1-1', 'road_l-2-3_l-1-2', 'road_l-2-3_l-1-3', 'road_l-2-3_l-2-1', 'road_l-2-3_l-2-2', 'road_l-2-3_l-3-1', 'road_l-2-3_l-3-2', 'road_l-2-3_l-3-3', 'road_l-3-1_l-1-1', 'road_l-3-1_l-1-2', 'road_l-3-1_l-1-3', 'road_l-3-1_l-2-1', 'road_l-3-1_l-2-2', 'road_l-3-1_l-2-3', 'road_l-3-1_l-3-2', 'road_l-3-1_l-3-3', 'road_l-3-2_l-1-1', 'road_l-3-2_l-1-2', 'road_l-3-2_l-1-3', 'road_l-3-2_l-2-1', 'road_l-3-2_l-2-2', 'road_l-3-2_l-2-3', 'road_l-3-2_l-3-1', 'road_l-3-2_l-3-3', 'road_l-3-3_l-1-1', 'road_l-3-3_l-1-2', 'road_l-3-3_l-1-3', 'road_l-3-3_l-2-1', 'road_l-3-3_l-2-2', 'road_l-3-3_l-2-3', 'road_l-3-3_l-3-1', 'road_l-3-3_l-3-2', 'spare-in_l-1-1', 'spare-in_l-1-2', 'spare-in_l-1-3', 'spare-in_l-2-1', 'spare-in_l-2-2', 'spare-in_l-2-3', 'spare-in_l-3-1', 'spare-in_l-3-2', 'spare-in_l-3-3', 'vehicle-at_l-1-1', 'vehicle-at_l-1-2', 'vehicle-at_l-1-3', 'vehicle-at_l-2-1', 'vehicle-at_l-2-2', 'vehicle-at_l-2-3', 'vehicle-at_l-3-1', 'vehicle-at_l-3-2', 'vehicle-at_l-3-3']),
    (['./tests/examples/triangle-tire.pddl', './tests/examples/triangle-tire-2.pddl'], ['not-flattire', 'road_l-1-1_l-1-2', 'road_l-1-1_l-1-3', 'road_l-1-1_l-1-4', 'road_l-1-1_l-1-5', 'road_l-1-1_l-2-1', 'road_l-1-1_l-2-2', 'road_l-1-1_l-2-3', 'road_l-1-1_l-2-4', 'road_l-1-1_l-2-5', 'road_l-1-1_l-3-1', 'road_l-1-1_l-3-2', 'road_l-1-1_l-3-3', 'road_l-1-1_l-3-4', 'road_l-1-1_l-3-5', 'road_l-1-1_l-4-1', 'road_l-1-1_l-4-2', 'road_l-1-1_l-4-3', 'road_l-1-1_l-4-4', 'road_l-1-1_l-4-5', 'road_l-1-1_l-5-1', 'road_l-1-1_l-5-2', 'road_l-1-1_l-5-3', 'road_l-1-1_l-5-4', 'road_l-1-1_l-5-5', 'road_l-1-2_l-1-1', 'road_l-1-2_l-1-3', 'road_l-1-2_l-1-4', 'road_l-1-2_l-1-5', 'road_l-1-2_l-2-1', 'road_l-1-2_l-2-2', 'road_l-1-2_l-2-3', 'road_l-1-2_l-2-4', 'road_l-1-2_l-2-5', 'road_l-1-2_l-3-1', 'road_l-1-2_l-3-2', 'road_l-1-2_l-3-3', 'road_l-1-2_l-3-4', 'road_l-1-2_l-3-5', 'road_l-1-2_l-4-1', 'road_l-1-2_l-4-2', 'road_l-1-2_l-4-3', 'road_l-1-2_l-4-4', 'road_l-1-2_l-4-5', 'road_l-1-2_l-5-1', 'road_l-1-2_l-5-2', 'road_l-1-2_l-5-3', 'road_l-1-2_l-5-4', 'road_l-1-2_l-5-5', 'road_l-1-3_l-1-1', 'road_l-1-3_l-1-2', 'road_l-1-3_l-1-4', 'road_l-1-3_l-1-5', 'road_l-1-3_l-2-1', 'road_l-1-3_l-2-2', 'road_l-1-3_l-2-3', 'road_l-1-3_l-2-4', 'road_l-1-3_l-2-5', 'road_l-1-3_l-3-1', 'road_l-1-3_l-3-2', 'road_l-1-3_l-3-3', 'road_l-1-3_l-3-4', 'road_l-1-3_l-3-5', 'road_l-1-3_l-4-1', 'road_l-1-3_l-4-2', 'road_l-1-3_l-4-3', 'road_l-1-3_l-4-4', 'road_l-1-3_l-4-5', 'road_l-1-3_l-5-1', 'road_l-1-3_l-5-2', 'road_l-1-3_l-5-3', 'road_l-1-3_l-5-4', 'road_l-1-3_l-5-5', 'road_l-1-4_l-1-1', 'road_l-1-4_l-1-2', 'road_l-1-4_l-1-3', 'road_l-1-4_l-1-5', 'road_l-1-4_l-2-1', 'road_l-1-4_l-2-2', 'road_l-1-4_l-2-3', 'road_l-1-4_l-2-4', 'road_l-1-4_l-2-5', 'road_l-1-4_l-3-1', 'road_l-1-4_l-3-2', 'road_l-1-4_l-3-3', 'road_l-1-4_l-3-4', 'road_l-1-4_l-3-5', 'road_l-1-4_l-4-1', 'road_l-1-4_l-4-2', 'road_l-1-4_l-4-3', 'road_l-1-4_l-4-4', 'road_l-1-4_l-4-5', 'road_l-1-4_l-5-1', 'road_l-1-4_l-5-2', 'road_l-1-4_l-5-3', 'road_l-1-4_l-5-4', 'road_l-1-4_l-5-5', 'road_l-1-5_l-1-1', 'road_l-1-5_l-1-2', 'road_l-1-5_l-1-3', 'road_l-1-5_l-1-4', 'road_l-1-5_l-2-1', 'road_l-1-5_l-2-2', 'road_l-1-5_l-2-3', 'road_l-1-5_l-2-4', 'road_l-1-5_l-2-5', 'road_l-1-5_l-3-1', 'road_l-1-5_l-3-2', 'road_l-1-5_l-3-3', 'road_l-1-5_l-3-4', 'road_l-1-5_l-3-5', 'road_l-1-5_l-4-1', 'road_l-1-5_l-4-2', 'road_l-1-5_l-4-3', 'road_l-1-5_l-4-4', 'road_l-1-5_l-4-5', 'road_l-1-5_l-5-1', 'road_l-1-5_l-5-2', 'road_l-1-5_l-5-3', 'road_l-1-5_l-5-4', 'road_l-1-5_l-5-5', 'road_l-2-1_l-1-1', 'road_l-2-1_l-1-2', 'road_l-2-1_l-1-3', 'road_l-2-1_l-1-4', 'road_l-2-1_l-1-5', 'road_l-2-1_l-2-2', 'road_l-2-1_l-2-3', 'road_l-2-1_l-2-4', 'road_l-2-1_l-2-5', 'road_l-2-1_l-3-1', 'road_l-2-1_l-3-2', 'road_l-2-1_l-3-3', 'road_l-2-1_l-3-4', 'road_l-2-1_l-3-5', 'road_l-2-1_l-4-1', 'road_l-2-1_l-4-2', 'road_l-2-1_l-4-3', 'road_l-2-1_l-4-4', 'road_l-2-1_l-4-5', 'road_l-2-1_l-5-1', 'road_l-2-1_l-5-2', 'road_l-2-1_l-5-3', 'road_l-2-1_l-5-4', 'road_l-2-1_l-5-5', 'road_l-2-2_l-1-1', 'road_l-2-2_l-1-2', 'road_l-2-2_l-1-3', 'road_l-2-2_l-1-4', 'road_l-2-2_l-1-5', 'road_l-2-2_l-2-1', 'road_l-2-2_l-2-3', 'road_l-2-2_l-2-4', 'road_l-2-2_l-2-5', 'road_l-2-2_l-3-1', 'road_l-2-2_l-3-2', 'road_l-2-2_l-3-3', 'road_l-2-2_l-3-4', 'road_l-2-2_l-3-5', 'road_l-2-2_l-4-1', 'road_l-2-2_l-4-2', 'road_l-2-2_l-4-3', 'road_l-2-2_l-4-4', 'road_l-2-2_l-4-5', 'road_l-2-2_l-5-1', 'road_l-2-2_l-5-2', 'road_l-2-2_l-5-3', 'road_l-2-2_l-5-4', 'road_l-2-2_l-5-5', 'road_l-2-3_l-1-1', 'road_l-2-3_l-1-2', 'road_l-2-3_l-1-3', 'road_l-2-3_l-1-4', 'road_l-2-3_l-1-5', 'road_l-2-3_l-2-1', 'road_l-2-3_l-2-2', 'road_l-2-3_l-2-4', 'road_l-2-3_l-2-5', 'road_l-2-3_l-3-1', 'road_l-2-3_l-3-2', 'road_l-2-3_l-3-3', 'road_l-2-3_l-3-4', 'road_l-2-3_l-3-5', 'road_l-2-3_l-4-1', 'road_l-2-3_l-4-2', 'road_l-2-3_l-4-3', 'road_l-2-3_l-4-4', 'road_l-2-3_l-4-5', 'road_l-2-3_l-5-1', 'road_l-2-3_l-5-2', 'road_l-2-3_l-5-3', 'road_l-2-3_l-5-4', 'road_l-2-3_l-5-5', 'road_l-2-4_l-1-1', 'road_l-2-4_l-1-2', 'road_l-2-4_l-1-3', 'road_l-2-4_l-1-4', 'road_l-2-4_l-1-5', 'road_l-2-4_l-2-1', 'road_l-2-4_l-2-2', 'road_l-2-4_l-2-3', 'road_l-2-4_l-2-5', 'road_l-2-4_l-3-1', 'road_l-2-4_l-3-2', 'road_l-2-4_l-3-3', 'road_l-2-4_l-3-4', 'road_l-2-4_l-3-5', 'road_l-2-4_l-4-1', 'road_l-2-4_l-4-2', 'road_l-2-4_l-4-3', 'road_l-2-4_l-4-4', 'road_l-2-4_l-4-5', 'road_l-2-4_l-5-1', 'road_l-2-4_l-5-2', 'road_l-2-4_l-5-3', 'road_l-2-4_l-5-4', 'road_l-2-4_l-5-5', 'road_l-2-5_l-1-1', 'road_l-2-5_l-1-2', 'road_l-2-5_l-1-3', 'road_l-2-5_l-1-4', 'road_l-2-5_l-1-5', 'road_l-2-5_l-2-1', 'road_l-2-5_l-2-2', 'road_l-2-5_l-2-3', 'road_l-2-5_l-2-4', 'road_l-2-5_l-3-1', 'road_l-2-5_l-3-2', 'road_l-2-5_l-3-3', 'road_l-2-5_l-3-4', 'road_l-2-5_l-3-5', 'road_l-2-5_l-4-1', 'road_l-2-5_l-4-2', 'road_l-2-5_l-4-3', 'road_l-2-5_l-4-4', 'road_l-2-5_l-4-5', 'road_l-2-5_l-5-1', 'road_l-2-5_l-5-2', 'road_l-2-5_l-5-3', 'road_l-2-5_l-5-4', 'road_l-2-5_l-5-5', 'road_l-3-1_l-1-1', 'road_l-3-1_l-1-2', 'road_l-3-1_l-1-3', 'road_l-3-1_l-1-4', 'road_l-3-1_l-1-5', 'road_l-3-1_l-2-1', 'road_l-3-1_l-2-2', 'road_l-3-1_l-2-3', 'road_l-3-1_l-2-4', 'road_l-3-1_l-2-5', 'road_l-3-1_l-3-2', 'road_l-3-1_l-3-3', 'road_l-3-1_l-3-4', 'road_l-3-1_l-3-5', 'road_l-3-1_l-4-1', 'road_l-3-1_l-4-2', 'road_l-3-1_l-4-3', 'road_l-3-1_l-4-4', 'road_l-3-1_l-4-5', 'road_l-3-1_l-5-1', 'road_l-3-1_l-5-2', 'road_l-3-1_l-5-3', 'road_l-3-1_l-5-4', 'road_l-3-1_l-5-5', 'road_l-3-2_l-1-1', 'road_l-3-2_l-1-2', 'road_l-3-2_l-1-3', 'road_l-3-2_l-1-4', 'road_l-3-2_l-1-5', 'road_l-3-2_l-2-1', 'road_l-3-2_l-2-2', 'road_l-3-2_l-2-3', 'road_l-3-2_l-2-4', 'road_l-3-2_l-2-5', 'road_l-3-2_l-3-1', 'road_l-3-2_l-3-3', 'road_l-3-2_l-3-4', 'road_l-3-2_l-3-5', 'road_l-3-2_l-4-1', 'road_l-3-2_l-4-2', 'road_l-3-2_l-4-3', 'road_l-3-2_l-4-4', 'road_l-3-2_l-4-5', 'road_l-3-2_l-5-1', 'road_l-3-2_l-5-2', 'road_l-3-2_l-5-3', 'road_l-3-2_l-5-4', 'road_l-3-2_l-5-5', 'road_l-3-3_l-1-1', 'road_l-3-3_l-1-2', 'road_l-3-3_l-1-3', 'road_l-3-3_l-1-4', 'road_l-3-3_l-1-5', 'road_l-3-3_l-2-1', 'road_l-3-3_l-2-2', 'road_l-3-3_l-2-3', 'road_l-3-3_l-2-4', 'road_l-3-3_l-2-5', 'road_l-3-3_l-3-1', 'road_l-3-3_l-3-2', 'road_l-3-3_l-3-4', 'road_l-3-3_l-3-5', 'road_l-3-3_l-4-1', 'road_l-3-3_l-4-2', 'road_l-3-3_l-4-3', 'road_l-3-3_l-4-4', 'road_l-3-3_l-4-5', 'road_l-3-3_l-5-1', 'road_l-3-3_l-5-2', 'road_l-3-3_l-5-3', 'road_l-3-3_l-5-4', 'road_l-3-3_l-5-5', 'road_l-3-4_l-1-1', 'road_l-3-4_l-1-2', 'road_l-3-4_l-1-3', 'road_l-3-4_l-1-4', 'road_l-3-4_l-1-5', 'road_l-3-4_l-2-1', 'road_l-3-4_l-2-2', 'road_l-3-4_l-2-3', 'road_l-3-4_l-2-4', 'road_l-3-4_l-2-5', 'road_l-3-4_l-3-1', 'road_l-3-4_l-3-2', 'road_l-3-4_l-3-3', 'road_l-3-4_l-3-5', 'road_l-3-4_l-4-1', 'road_l-3-4_l-4-2', 'road_l-3-4_l-4-3', 'road_l-3-4_l-4-4', 'road_l-3-4_l-4-5', 'road_l-3-4_l-5-1', 'road_l-3-4_l-5-2', 'road_l-3-4_l-5-3', 'road_l-3-4_l-5-4', 'road_l-3-4_l-5-5', 'road_l-3-5_l-1-1', 'road_l-3-5_l-1-2', 'road_l-3-5_l-1-3', 'road_l-3-5_l-1-4', 'road_l-3-5_l-1-5', 'road_l-3-5_l-2-1', 'road_l-3-5_l-2-2', 'road_l-3-5_l-2-3', 'road_l-3-5_l-2-4', 'road_l-3-5_l-2-5', 'road_l-3-5_l-3-1', 'road_l-3-5_l-3-2', 'road_l-3-5_l-3-3', 'road_l-3-5_l-3-4', 'road_l-3-5_l-4-1', 'road_l-3-5_l-4-2', 'road_l-3-5_l-4-3', 'road_l-3-5_l-4-4', 'road_l-3-5_l-4-5', 'road_l-3-5_l-5-1', 'road_l-3-5_l-5-2', 'road_l-3-5_l-5-3', 'road_l-3-5_l-5-4', 'road_l-3-5_l-5-5', 'road_l-4-1_l-1-1', 'road_l-4-1_l-1-2', 'road_l-4-1_l-1-3', 'road_l-4-1_l-1-4', 'road_l-4-1_l-1-5', 'road_l-4-1_l-2-1', 'road_l-4-1_l-2-2', 'road_l-4-1_l-2-3', 'road_l-4-1_l-2-4', 'road_l-4-1_l-2-5', 'road_l-4-1_l-3-1', 'road_l-4-1_l-3-2', 'road_l-4-1_l-3-3', 'road_l-4-1_l-3-4', 'road_l-4-1_l-3-5', 'road_l-4-1_l-4-2', 'road_l-4-1_l-4-3', 'road_l-4-1_l-4-4', 'road_l-4-1_l-4-5', 'road_l-4-1_l-5-1', 'road_l-4-1_l-5-2', 'road_l-4-1_l-5-3', 'road_l-4-1_l-5-4', 'road_l-4-1_l-5-5', 'road_l-4-2_l-1-1', 'road_l-4-2_l-1-2', 'road_l-4-2_l-1-3', 'road_l-4-2_l-1-4', 'road_l-4-2_l-1-5', 'road_l-4-2_l-2-1', 'road_l-4-2_l-2-2', 'road_l-4-2_l-2-3', 'road_l-4-2_l-2-4', 'road_l-4-2_l-2-5', 'road_l-4-2_l-3-1', 'road_l-4-2_l-3-2', 'road_l-4-2_l-3-3', 'road_l-4-2_l-3-4', 'road_l-4-2_l-3-5', 'road_l-4-2_l-4-1', 'road_l-4-2_l-4-3', 'road_l-4-2_l-4-4', 'road_l-4-2_l-4-5', 'road_l-4-2_l-5-1', 'road_l-4-2_l-5-2', 'road_l-4-2_l-5-3', 'road_l-4-2_l-5-4', 'road_l-4-2_l-5-5', 'road_l-4-3_l-1-1', 'road_l-4-3_l-1-2', 'road_l-4-3_l-1-3', 'road_l-4-3_l-1-4', 'road_l-4-3_l-1-5', 'road_l-4-3_l-2-1', 'road_l-4-3_l-2-2', 'road_l-4-3_l-2-3', 'road_l-4-3_l-2-4', 'road_l-4-3_l-2-5', 'road_l-4-3_l-3-1', 'road_l-4-3_l-3-2', 'road_l-4-3_l-3-3', 'road_l-4-3_l-3-4', 'road_l-4-3_l-3-5', 'road_l-4-3_l-4-1', 'road_l-4-3_l-4-2', 'road_l-4-3_l-4-4', 'road_l-4-3_l-4-5', 'road_l-4-3_l-5-1', 'road_l-4-3_l-5-2', 'road_l-4-3_l-5-3', 'road_l-4-3_l-5-4', 'road_l-4-3_l-5-5', 'road_l-4-4_l-1-1', 'road_l-4-4_l-1-2', 'road_l-4-4_l-1-3', 'road_l-4-4_l-1-4', 'road_l-4-4_l-1-5', 'road_l-4-4_l-2-1', 'road_l-4-4_l-2-2', 'road_l-4-4_l-2-3', 'road_l-4-4_l-2-4', 'road_l-4-4_l-2-5', 'road_l-4-4_l-3-1', 'road_l-4-4_l-3-2', 'road_l-4-4_l-3-3', 'road_l-4-4_l-3-4', 'road_l-4-4_l-3-5', 'road_l-4-4_l-4-1', 'road_l-4-4_l-4-2', 'road_l-4-4_l-4-3', 'road_l-4-4_l-4-5', 'road_l-4-4_l-5-1', 'road_l-4-4_l-5-2', 'road_l-4-4_l-5-3', 'road_l-4-4_l-5-4', 'road_l-4-4_l-5-5', 'road_l-4-5_l-1-1', 'road_l-4-5_l-1-2', 'road_l-4-5_l-1-3', 'road_l-4-5_l-1-4', 'road_l-4-5_l-1-5', 'road_l-4-5_l-2-1', 'road_l-4-5_l-2-2', 'road_l-4-5_l-2-3', 'road_l-4-5_l-2-4', 'road_l-4-5_l-2-5', 'road_l-4-5_l-3-1', 'road_l-4-5_l-3-2', 'road_l-4-5_l-3-3', 'road_l-4-5_l-3-4', 'road_l-4-5_l-3-5', 'road_l-4-5_l-4-1', 'road_l-4-5_l-4-2', 'road_l-4-5_l-4-3', 'road_l-4-5_l-4-4', 'road_l-4-5_l-5-1', 'road_l-4-5_l-5-2', 'road_l-4-5_l-5-3', 'road_l-4-5_l-5-4', 'road_l-4-5_l-5-5', 'road_l-5-1_l-1-1', 'road_l-5-1_l-1-2', 'road_l-5-1_l-1-3', 'road_l-5-1_l-1-4', 'road_l-5-1_l-1-5', 'road_l-5-1_l-2-1', 'road_l-5-1_l-2-2', 'road_l-5-1_l-2-3', 'road_l-5-1_l-2-4', 'road_l-5-1_l-2-5', 'road_l-5-1_l-3-1', 'road_l-5-1_l-3-2', 'road_l-5-1_l-3-3', 'road_l-5-1_l-3-4', 'road_l-5-1_l-3-5', 'road_l-5-1_l-4-1', 'road_l-5-1_l-4-2', 'road_l-5-1_l-4-3', 'road_l-5-1_l-4-4', 'road_l-5-1_l-4-5', 'road_l-5-1_l-5-2', 'road_l-5-1_l-5-3', 'road_l-5-1_l-5-4', 'road_l-5-1_l-5-5', 'road_l-5-2_l-1-1', 'road_l-5-2_l-1-2', 'road_l-5-2_l-1-3', 'road_l-5-2_l-1-4', 'road_l-5-2_l-1-5', 'road_l-5-2_l-2-1', 'road_l-5-2_l-2-2', 'road_l-5-2_l-2-3', 'road_l-5-2_l-2-4', 'road_l-5-2_l-2-5', 'road_l-5-2_l-3-1', 'road_l-5-2_l-3-2', 'road_l-5-2_l-3-3', 'road_l-5-2_l-3-4', 'road_l-5-2_l-3-5', 'road_l-5-2_l-4-1', 'road_l-5-2_l-4-2', 'road_l-5-2_l-4-3', 'road_l-5-2_l-4-4', 'road_l-5-2_l-4-5', 'road_l-5-2_l-5-1', 'road_l-5-2_l-5-3', 'road_l-5-2_l-5-4', 'road_l-5-2_l-5-5', 'road_l-5-3_l-1-1', 'road_l-5-3_l-1-2', 'road_l-5-3_l-1-3', 'road_l-5-3_l-1-4', 'road_l-5-3_l-1-5', 'road_l-5-3_l-2-1', 'road_l-5-3_l-2-2', 'road_l-5-3_l-2-3', 'road_l-5-3_l-2-4', 'road_l-5-3_l-2-5', 'road_l-5-3_l-3-1', 'road_l-5-3_l-3-2', 'road_l-5-3_l-3-3', 'road_l-5-3_l-3-4', 'road_l-5-3_l-3-5', 'road_l-5-3_l-4-1', 'road_l-5-3_l-4-2', 'road_l-5-3_l-4-3', 'road_l-5-3_l-4-4', 'road_l-5-3_l-4-5', 'road_l-5-3_l-5-1', 'road_l-5-3_l-5-2', 'road_l-5-3_l-5-4', 'road_l-5-3_l-5-5', 'road_l-5-4_l-1-1', 'road_l-5-4_l-1-2', 'road_l-5-4_l-1-3', 'road_l-5-4_l-1-4', 'road_l-5-4_l-1-5', 'road_l-5-4_l-2-1', 'road_l-5-4_l-2-2', 'road_l-5-4_l-2-3', 'road_l-5-4_l-2-4', 'road_l-5-4_l-2-5', 'road_l-5-4_l-3-1', 'road_l-5-4_l-3-2', 'road_l-5-4_l-3-3', 'road_l-5-4_l-3-4', 'road_l-5-4_l-3-5', 'road_l-5-4_l-4-1', 'road_l-5-4_l-4-2', 'road_l-5-4_l-4-3', 'road_l-5-4_l-4-4', 'road_l-5-4_l-4-5', 'road_l-5-4_l-5-1', 'road_l-5-4_l-5-2', 'road_l-5-4_l-5-3', 'road_l-5-4_l-5-5', 'road_l-5-5_l-1-1', 'road_l-5-5_l-1-2', 'road_l-5-5_l-1-3', 'road_l-5-5_l-1-4', 'road_l-5-5_l-1-5', 'road_l-5-5_l-2-1', 'road_l-5-5_l-2-2', 'road_l-5-5_l-2-3', 'road_l-5-5_l-2-4', 'road_l-5-5_l-2-5', 'road_l-5-5_l-3-1', 'road_l-5-5_l-3-2', 'road_l-5-5_l-3-3', 'road_l-5-5_l-3-4', 'road_l-5-5_l-3-5', 'road_l-5-5_l-4-1', 'road_l-5-5_l-4-2', 'road_l-5-5_l-4-3', 'road_l-5-5_l-4-4', 'road_l-5-5_l-4-5', 'road_l-5-5_l-5-1', 'road_l-5-5_l-5-2', 'road_l-5-5_l-5-3', 'road_l-5-5_l-5-4', 'spare-in_l-1-1', 'spare-in_l-1-2', 'spare-in_l-1-3', 'spare-in_l-1-4', 'spare-in_l-1-5', 'spare-in_l-2-1', 'spare-in_l-2-2', 'spare-in_l-2-3', 'spare-in_l-2-4', 'spare-in_l-2-5', 'spare-in_l-3-1', 'spare-in_l-3-2', 'spare-in_l-3-3', 'spare-in_l-3-4', 'spare-in_l-3-5', 'spare-in_l-4-1', 'spare-in_l-4-2', 'spare-in_l-4-3', 'spare-in_l-4-4', 'spare-in_l-4-5', 'spare-in_l-5-1', 'spare-in_l-5-2', 'spare-in_l-5-3', 'spare-in_l-5-4', 'spare-in_l-5-5', 'vehicle-at_l-1-1', 'vehicle-at_l-1-2', 'vehicle-at_l-1-3', 'vehicle-at_l-1-4', 'vehicle-at_l-1-5', 'vehicle-at_l-2-1', 'vehicle-at_l-2-2', 'vehicle-at_l-2-3', 'vehicle-at_l-2-4', 'vehicle-at_l-2-5', 'vehicle-at_l-3-1', 'vehicle-at_l-3-2', 'vehicle-at_l-3-3', 'vehicle-at_l-3-4', 'vehicle-at_l-3-5', 'vehicle-at_l-4-1', 'vehicle-at_l-4-2', 'vehicle-at_l-4-3', 'vehicle-at_l-4-4', 'vehicle-at_l-4-5', 'vehicle-at_l-5-1', 'vehicle-at_l-5-2', 'vehicle-at_l-5-3', 'vehicle-at_l-5-4', 'vehicle-at_l-5-5'])

    ])
def test_prepositions_storage(filenames, expected):
    parser = Parser(filenames[0],filenames[1])
    ans = sorted([ str(i) for i in parser.propositions])
    assert ans == expected

@pytest.mark.parametrize("filenames,expected", [
    (["./tests/examples/gripper3.pddl","./tests/examples/gripper3_2_balls.pddl"],
    ['at-ball_ball1_rooma', 'at-ball_ball2_rooma', 'at-robby_rooma', 'free_left', 'free_right', 'whole_ball1', 'whole_ball2']),
    (['./tests/examples/gripper3.pddl', './tests/examples/gripper3_3_balls.pddl'], ['at-ball_ball1_rooma', 'at-ball_ball2_rooma', 'at-ball_ball3_rooma', 'at-robby_rooma', 'free_left', 'free_right', 'whole_ball1', 'whole_ball2', 'whole_ball3']),
    (['./tests/examples/triangle-tire.pddl', './tests/examples/triangle-tire-1.pddl'], ['not-flattire', 'road_l-1-1_l-1-2', 'road_l-1-1_l-2-1', 'road_l-1-2_l-1-3', 'road_l-1-2_l-2-2', 'road_l-2-1_l-1-2', 'road_l-2-1_l-3-1', 'road_l-2-2_l-1-3', 'road_l-3-1_l-2-2', 'spare-in_l-2-1', 'spare-in_l-2-2', 'spare-in_l-3-1', 'vehicle-at_l-1-1']),
    (['./tests/examples/triangle-tire.pddl', './tests/examples/triangle-tire-2.pddl'], ['not-flattire', 'road_l-1-1_l-1-2', 'road_l-1-1_l-2-1', 'road_l-1-2_l-1-3', 'road_l-1-2_l-2-2', 'road_l-1-3_l-1-4', 'road_l-1-3_l-2-3', 'road_l-1-4_l-1-5', 'road_l-1-4_l-2-4', 'road_l-2-1_l-1-2', 'road_l-2-1_l-3-1', 'road_l-2-2_l-1-3', 'road_l-2-3_l-1-4', 'road_l-2-3_l-3-3', 'road_l-2-4_l-1-5', 'road_l-3-1_l-2-2', 'road_l-3-1_l-3-2', 'road_l-3-1_l-4-1', 'road_l-3-2_l-3-3', 'road_l-3-2_l-4-2', 'road_l-3-3_l-2-4', 'road_l-4-1_l-3-2', 'road_l-4-1_l-5-1', 'road_l-4-2_l-3-3', 'road_l-5-1_l-4-2', 'spare-in_l-2-1', 'spare-in_l-2-2', 'spare-in_l-2-3', 'spare-in_l-2-4', 'spare-in_l-3-1', 'spare-in_l-3-3', 'spare-in_l-4-1', 'spare-in_l-4-2', 'spare-in_l-5-1', 'vehicle-at_l-1-1'])
    ])
def test_initial_state_storage(filenames, expected):
    parser = Parser(filenames[0],filenames[1])
    initial_state = parser.get_initial_state()
    ans = sorted([str(parser.propositions[i]) for i in range(len(parser.propositions)) if initial_state[i] == 1])
    assert ans==expected

@pytest.mark.parametrize("filenames,expected", [
    (["./tests/examples/gripper3.pddl","./tests/examples/gripper3_2_balls.pddl"],
    [("at-ball_ball1_roomb", 1), ("at-ball_ball2_roomb", 1), ("at-robby_roomb", 1), ("whole_ball1", 1), ("whole_ball2", 1)]),
    (['./tests/examples/gripper3.pddl', './tests/examples/gripper3_3_balls.pddl'], [('at-ball_ball1_roomb', 1), ('at-ball_ball2_roomb', 1), ('at-ball_ball3_roomb', 1), ('at-robby_roomb', 1), ('whole_ball1', 1), ('whole_ball2', 1), ('whole_ball3', 1)]),
    (['./tests/examples/triangle-tire.pddl', './tests/examples/triangle-tire-1.pddl'], [('vehicle-at_l-1-3', 1)]),
    (['./tests/examples/triangle-tire.pddl', './tests/examples/triangle-tire-2.pddl'], [('vehicle-at_l-1-5', 1)])
    ])
def test_goal_state_storage(filenames, expected):
    parser = Parser(filenames[0],filenames[1])
    goal_state = parser.get_goal_state()
    ans = sorted([(str(parser.propositions[i]), goal_state[i]) for i in range(len(parser.propositions)) if goal_state[i] != -1])
    assert ans==expected
